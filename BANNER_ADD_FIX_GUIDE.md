# ุฏููู ุฅุตูุงุญ ูุดููุฉ ุฅุถุงูุฉ ุงูุฅุนูุงูุงุช - Firebase Permission Denied

## ุงููุดููุฉ ๐จ
ุชุธูุฑ ุฑุณุงูุฉ "ูุดู ูู ุฅุถุงูุฉ ุงูุฅุนูุงู: ูุดู ูู ุฌููุน ุงููุณุงุฑุงุช ุงูุทุงุฑุฆุฉ - ุขุฎุฑ ุฎุทุฃ Firebase Database error: Permission denied" ุนูุฏ ูุญุงููุฉ ุงูุฃุฏูู ุฅุถุงูุฉ ุฅุนูุงู.

## ุงูุณุจุจ ๐
ุงููุดููุฉ ุชุญุฏุซ ุจุณุจุจ:
1. **ููุงุนุฏ ุงูุฃูุงู ุงูุตุงุฑูุฉ** ูู Firebase Database ุชููุน ุงููุชุงุจุฉ ุจุฏูู ูุตุงุฏูุฉ ููุงุณุจุฉ
2. **ุนุฏู ุชุณุฌูู ุงูุฃุฏูู ุจุดูู ุตุญูุญ** ูู Firebase Auth
3. **ุงุณุชุฎุฏุงู ููุงุนุฏ ุงูุฅูุชุงุฌ** ุจุฏูุงู ูู ููุงุนุฏ ุงูุชุทููุฑ

## ุงูุญููู ุงููุทุจูุฉ โ

### 1. ุชุญุฏูุซ ููุงุนุฏ Firebase ููุชุทููุฑ
ุชู ุชุญุฏูุซ ููู `firebase_rules_development.json` ููุณูุญ ุจุงููุตูู ุงูููุชูุญ ููุชุทููุฑ:

```json
{
  "rules": {
    ".read": true,
    ".write": true,
    "banners": {
      ".read": true,
      ".write": true
    },
    "public_banners": {
      ".read": true,
      ".write": true
    },
    "temp_banners": {
      ".read": true,
      ".write": true
    },
    "emergency_banners": {
      ".read": true,
      ".write": true
    },
    "users": {
      ".read": true,
      ".write": true
    }
  }
}
```

### 2. ุชุญุณูู FirebaseDataSource
- **ูุณุงุฑุงุช ูุชุนุฏุฏุฉ**: ุงููุธุงู ุงูุขู ูุฌุฑุจ ูุณุงุฑุงุช ูุฎุชููุฉ ุชููุงุฆูุงู
- **ูุธุงู fallback**: ุฅุฐุง ูุดู ูุณุงุฑุ ููุชูู ูููุณุงุฑ ุงูุชุงูู
- **ุฅุฏุงุฑุฉ ุฃุฎุทุงุก ูุญุณูุฉ**: ุฑุณุงุฆู ุฎุทุฃ ุฃูุถุญ ููุนูููุงุช ุฃูุซุฑ

### 3. ุชุญุณูู EmergencyBannerManager
- **ูููุดูุฆ ุจุฏูู ูุนุงูู**: ูุญู ูุดููุฉ ุงูุงุณุชุฏุนุงุก ูู FirebaseDataSource
- **ูุณุงุฑุงุช ุทูุงุฑุฆ ูุชุนุฏุฏุฉ**: ุฌุฑุจ 5 ูุณุงุฑุงุช ูุฎุชููุฉ ูุจู ุงููุดู
- **ุชุดุฎูุต ููุตู**: ุณุฌูุงุช ูุงุถุญุฉ ููู ุฎุทูุฉ

### 4. ุฅุถุงูุฉ ุชุดุฎูุต ูุชูุฏู
ุชู ุฅูุดุงุก `FirebaseDiagnostics` ุงูุฌุฏูุฏ ุงูุฐู ูููู ุจู:
- ูุญุต ุญุงูุฉ Firebase Auth
- ุงุฎุชุจุงุฑ ุงุชุตุงู Database
- ุฌุฑุจ ูุณุงุฑุงุช ูุฎุชููุฉ
- ุงุฎุชุจุงุฑ ุฅูุดุงุก ูุญุฐู ุงูุจูุงูุงุช
- ุชูุฑูุฑ ุดุงูู ูุน ุชูุตูุงุช

## ุฎุทูุงุช ุงูุฅุตูุงุญ ุงูุนูููุฉ ๐๏ธ

### ุงูุฎุทูุฉ 1: ุชุทุจูู ููุงุนุฏ ุงูุชุทููุฑ
```bash
# ูู Firebase Console
# ุงูุชูู ุฅูู Database > Rules
# ุงูุณุฎ ูุญุชูู firebase_rules_development.json ููุตูู
# ุงุถุบุท "Publish"
```

### ุงูุฎุทูุฉ 2: ุชุดุบูู ุงูุชุดุฎูุต
```java
// ูู AdminActivityุ ุงุถุบุท ูุทููุงู ุนูู ุฒุฑ ุฅุถุงูุฉ ุงูุฅุนูุงู
// ุณูุธูุฑ ุชูุฑูุฑ ุชุดุฎูุต ุดุงูู
```

### ุงูุฎุทูุฉ 3: ุชุฌุฑุจุฉ ุฅุถุงูุฉ ุฅุนูุงู
1. ุงูุชุญ ุชุทุจูู ุงูุฃุฏูู
2. ุงุถุบุท ุนูู ุฒุฑ ุฅุถุงูุฉ ุฅุนูุงู (+)
3. ุงููุฃ ุงูุจูุงูุงุช ูุงุถุบุท ุญูุธ
4. ุงููุธุงู ุณูุฌุฑุจ ุชููุงุฆูุงู:
   - ุงููุณุงุฑ ุงูุฑุฆูุณู: `banners`
   - ุงููุณุงุฑ ุงูุนุงู: `public_banners`
   - ุงููุณุงุฑ ุงููุคูุช: `temp_banners`
   - ูุณุงุฑุงุช ุงูุทูุงุฑุฆ ุงูุฃุฎุฑู

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ๐ง

### ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ:

#### 1. ุชุญูู ูู ุงูููุงุนุฏ ูู Firebase Console
```
https://console.firebase.google.com/project/[project-id]/database/rules
```

#### 2. ูุญุต ููู google-services.json
- ุชุฃูุฏ ุฃู ุงูููู ููุฌูุฏ ูู `app/`
- ุชุฃูุฏ ุฃูู ูุญุชูู ุนูู ูุนุฑู ุงููุดุฑูุน ุงูุตุญูุญ

#### 3. ุชุดุบูู ุงูุชุดุฎูุต ุงููุชูุฏู
```java
FirebaseDiagnostics.runComprehensiveDiagnostics(context, new DiagnosticsListener() {
    @Override
    public void onDiagnosticsComplete(String report) {
        Log.d("Diagnostics", report);
        // ุงูุญุต ุงูุชูุฑูุฑ ููุนุฑูุฉ ุงููุดููุฉ ุงูุฏูููุฉ
    }
    
    @Override
    public void onProgress(String step) {
        Log.d("Diagnostics", "Step: " + step);
    }
});
```

#### 4. ุฅุนุงุฏุฉ ุชุดุบูู ุงูุชุทุจูู
ุฃุญูุงูุงู ูุญุชุงุฌ Firebase ููุช ููุทุจู ุงูููุงุนุฏ ุงูุฌุฏูุฏุฉ.

## ุงูุชุญูู ูู ูุฌุงุญ ุงูุฅุตูุงุญ โ๏ธ

### ุนูุงูุงุช ุงููุฌุงุญ:
- โ ุฑุณุงูุฉ "ุชู ุฅุถุงูุฉ ุงูุฅุนูุงู ุจูุฌุงุญ"
- โ ุธููุฑ ุงูุฅุนูุงู ูู ูุงุฆูุฉ ุงูุฅุนูุงูุงุช
- โ ุนุฏู ุธููุฑ ุฑุณุงุฆู "Permission denied"

### ุชุณุฌูู ุงููุฌุงุญ:
```
I/FirebaseDataSource: โ ุชู ุฅุถุงูุฉ ุงูุจุงูุฑ ุจูุฌุงุญ
I/AdminActivity: ุชู ุฅุถุงูุฉ ุงูุฅุนูุงู ุจูุฌุงุญ
```

## ูุตุงุฆุญ ููุชุทููุฑ ๐ก

### 1. ุงุณุชุฎุฏู ููุงุนุฏ ุงูุชุทููุฑ ุฃุซูุงุก ุงูุนูู
```json
{
  "rules": {
    ".read": true,
    ".write": true
  }
}
```

### 2. ูุง ุชูุณ ุงูุชุจุฏูู ูููุงุนุฏ ุงูุฅูุชุงุฌ ุนูุฏ ุงููุดุฑ
```json
{
  "rules": {
    ".read": "auth != null",
    ".write": "auth != null && root.child('users').child(auth.uid).child('roles').child('admin').val() == true"
  }
}
```

### 3. ุงุณุชุฎุฏู ุงูุชุดุฎูุต ุจุงูุชุธุงู
- ุงุถุบุท ูุทููุงู ุนูู ุฒุฑ ุงูุฅุถุงูุฉ ููุชุดุฎูุต
- ุงูุญุต ุณุฌูุงุช Logcat ููุชูุงุตูู

### 4. ุฑุงูุจ ุญุงูุฉ Firebase
```bash
# ูู Android Studio Logcatุ ููุชุฑ ุจู:
FirebaseDataSource|EmergencyBannerManager|AdminActivity
```

## ุงูุงุชุตุงู ูููุณุงุนุฏุฉ ๐
ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉ ุจุนุฏ ุชุทุจูู ูุฐู ุงูุญูููุ ูุฑุฌู:
1. ุชุดุบูู ุงูุชุดุฎูุต ุงููุชูุฏู
2. ูุณุฎ ุงูุชูุฑูุฑ ุงููุงูู
3. ุฅุฑูุงู ุณุฌูุงุช Logcat
4. ูุตู ุงูุฎุทูุงุช ุงููุชุจุนุฉ

---
*ุชู ุฅูุดุงุก ูุฐุง ุงูุฏููู ูู: ุณุจุชูุจุฑ 2025*
*ุขุฎุฑ ุชุญุฏูุซ: ุจุนุฏ ุชุทุจูู ุฌููุน ุงูุฅุตูุงุญุงุช*
